import{$a as a,Ca as u,Cb as O,Da as C,Ia as r,Ib as P,J as p,Ja as o,Ka as c,O as m,Qa as b,bb as x,d as s,hb as _,ja as l,ka as f,wa as h}from"./chunk-NXACR2KX.js";import{a as g}from"./chunk-K4ALXBGI.js";var v=(()=>{class t{constructor(){this.isLoading$=new s(!1),this.progress$=new s(0)}start(){this.isLoading$.next(!0),this.progress$.next(0),this.interval=setInterval(()=>{this.progress$.value<90&&this.progress$.next(this.progress$.value+5)},300)}finish(){clearInterval(this.interval),this.progress$.next(100),setTimeout(()=>{this.isLoading$.next(!1)},300)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function y(t,S){if(t&1&&(r(0,"div",1),c(1,"div",2),r(2,"div",3)(3,"div",4),c(4,"div",5)(5,"div",5)(6,"div",5),r(7,"div",6),c(8,"i",7),o()(),r(9,"div",8)(10,"div",9)(11,"div",10),c(12,"div",11),o()(),r(13,"div",12)(14,"span",13),a(15,"Cargando productos"),o(),r(16,"span",14),a(17),o()()(),r(18,"div",15)(19,"span",16),a(20,"Preparando tu experiencia de compra"),o()(),r(21,"div",17)(22,"span",18),a(23,"SwiFt\xA9"),o(),a(24," Store "),o()()()),t&2){let e=b();l(11),C("width",e.progress,"%"),l(6),x("",e.progress,"%")}}var $=(()=>{class t{constructor(e){this.loaderService=e,this.isLoading=!1,this.progress=0}ngOnInit(){this.loaderService.isLoading$.subscribe(e=>{this.isLoading=e}),this.loaderService.progress$.subscribe(e=>{this.progress=e})}static{this.\u0275fac=function(n){return new(n||t)(f(v))}}static{this.\u0275cmp=m({type:t,selectors:[["app-loader"]],standalone:!0,features:[_],decls:1,vars:1,consts:[["class","modern-loader-overlay",4,"ngIf"],[1,"modern-loader-overlay"],[1,"loader-backdrop"],[1,"loader-container"],[1,"loader-spinner"],[1,"spinner-ring"],[1,"spinner-core"],[1,"bi","bi-lightning-charge-fill"],[1,"loader-progress-wrapper"],[1,"loader-progress-bar"],[1,"loader-progress-fill"],[1,"progress-shimmer"],[1,"loader-progress-text"],[1,"progress-label"],[1,"progress-percentage"],[1,"loader-message"],[1,"dot-animation"],[1,"loader-brand"],[1,"brand-purple"]],template:function(n,i){n&1&&h(0,y,25,3,"div",0),n&2&&u("ngIf",i.isLoading)},dependencies:[P,O],styles:['.modern-loader-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:10000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.loader-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(135deg,#0c1e3af2,#020617fa);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);animation:_ngcontent-%COMP%_backdropPulse 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_backdropPulse{0%,to{opacity:.95}50%{opacity:1}}.loader-container[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;gap:2rem;padding:3rem;background:#161b22cc;border:2px solid rgba(96,165,250,.3);border-radius:24px;box-shadow:0 20px 60px #00000080,0 0 40px #60a5fa33;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);animation:_ngcontent-%COMP%_containerFloat 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_containerFloat{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.loader-spinner[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;display:flex;align-items:center;justify-content:center}.spinner-ring[_ngcontent-%COMP%]{position:absolute;border-radius:50%;border:3px solid transparent;animation:_ngcontent-%COMP%_spinRing 2s linear infinite}.spinner-ring[_ngcontent-%COMP%]:nth-child(1){width:120px;height:120px;border-top-color:#60a5fa;border-right-color:#60a5fa;animation-duration:1.5s}.spinner-ring[_ngcontent-%COMP%]:nth-child(2){width:90px;height:90px;border-bottom-color:#8b50fb;border-left-color:#8b50fb;animation-duration:2s;animation-direction:reverse}.spinner-ring[_ngcontent-%COMP%]:nth-child(3){width:60px;height:60px;border-top-color:#ff6b35;border-right-color:#ff6b35;animation-duration:1s}@keyframes _ngcontent-%COMP%_spinRing{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spinner-core[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,#60a5fa,#3b82f6);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 0 30px #60a5fa99;animation:_ngcontent-%COMP%_corePulse 1.5s ease-in-out infinite}.spinner-core[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1.75rem;animation:_ngcontent-%COMP%_iconSpin 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_corePulse{0%,to{transform:scale(1);box-shadow:0 0 30px #60a5fa99}50%{transform:scale(1.1);box-shadow:0 0 50px #60a5fae6}}@keyframes _ngcontent-%COMP%_iconSpin{0%,to{transform:rotate(0) scale(1)}25%{transform:rotate(-15deg) scale(1.1)}50%{transform:rotate(0) scale(1)}75%{transform:rotate(15deg) scale(1.1)}}.loader-progress-wrapper[_ngcontent-%COMP%]{width:100%;max-width:320px;display:flex;flex-direction:column;gap:.75rem}.loader-progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#ffffff1a;border-radius:10px;overflow:hidden;box-shadow:inset 0 2px 8px #0000004d}.loader-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#60a5fa,#3b82f6,#60a5fa);background-size:200% 100%;border-radius:10px;position:relative;transition:width .3s ease;animation:_ngcontent-%COMP%_progressGradient 2s linear infinite;box-shadow:0 0 15px #60a5fa99}@keyframes _ngcontent-%COMP%_progressGradient{0%{background-position:0% 50%}to{background-position:200% 50%}}.progress-shimmer[_ngcontent-%COMP%]{position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);animation:_ngcontent-%COMP%_shimmer 2s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}to{left:200%}}.loader-progress-text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:#fff;font-size:.9rem}.loader-progress-text[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{color:#8b949e;font-weight:500}.loader-progress-text[_ngcontent-%COMP%]   .progress-percentage[_ngcontent-%COMP%]{color:#60a5fa;font-weight:700;font-size:1rem}.loader-message[_ngcontent-%COMP%]{color:#fff;font-size:.95rem;font-weight:500;text-align:center}.loader-message[_ngcontent-%COMP%]   .dot-animation[_ngcontent-%COMP%]:after{content:"";animation:_ngcontent-%COMP%_dots 1.5s steps(4,end) infinite}@keyframes _ngcontent-%COMP%_dots{0%,20%{content:""}40%{content:"."}60%{content:".."}80%,to{content:"..."}}.loader-brand[_ngcontent-%COMP%]{color:#8b949e;font-size:.875rem;font-weight:600}.loader-brand[_ngcontent-%COMP%]   .brand-purple[_ngcontent-%COMP%]{color:#8b50fb;font-weight:700;text-shadow:0 0 10px rgba(139,80,251,.4)}@media (max-width: 576px){.loader-container[_ngcontent-%COMP%]{padding:2rem 1.5rem;margin:1rem;gap:1.5rem}.loader-spinner[_ngcontent-%COMP%]{width:90px;height:90px}.loader-spinner[_ngcontent-%COMP%]   .spinner-ring[_ngcontent-%COMP%]:nth-child(1){width:90px;height:90px}.loader-spinner[_ngcontent-%COMP%]   .spinner-ring[_ngcontent-%COMP%]:nth-child(2){width:68px;height:68px}.loader-spinner[_ngcontent-%COMP%]   .spinner-ring[_ngcontent-%COMP%]:nth-child(3){width:45px;height:45px}.loader-spinner[_ngcontent-%COMP%]   .spinner-core[_ngcontent-%COMP%]{width:38px;height:38px}.loader-spinner[_ngcontent-%COMP%]   .spinner-core[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.4rem}.loader-progress-wrapper[_ngcontent-%COMP%]{max-width:280px}.loader-message[_ngcontent-%COMP%]{font-size:.85rem}.loader-brand[_ngcontent-%COMP%]{font-size:.8rem}}']})}}return t})();var T=(()=>{class t{constructor(){this.cartItems=[],this.cartItemCountSubject=new s(0),this.cartItemCount$=this.cartItemCountSubject.asObservable(),this.scopeKey=this.computeScopeKey(),this.loadCartFromStorage()}computeScopeKey(){let e=sessionStorage.getItem("userInfo");if(!e)return"guest";try{return(JSON.parse(e)?.role??"guest").toLowerCase()}catch{return"guest"}}get CART_KEY(){return`cartItems_${this.scopeKey}`}switchScope(){this.scopeKey=this.computeScopeKey(),this.loadCartFromStorage()}loadCartFromStorage(){let e=sessionStorage.getItem(this.CART_KEY);this.cartItems=e?JSON.parse(e):[],this.updateCount()}saveCartToStorage(){sessionStorage.setItem(this.CART_KEY,JSON.stringify(this.cartItems))}clearCart(){this.cartItems=[],sessionStorage.removeItem(this.CART_KEY),this.updateCount()}clearAllCartsInSession(){Object.keys(sessionStorage).filter(e=>e.startsWith("cartItems_")).forEach(e=>sessionStorage.removeItem(e)),this.cartItems=[],this.updateCount()}getCart(){return[...this.cartItems]}setCart(e){this.cartItems=[...e],this.saveCartToStorage(),this.updateCount()}addToCart(e){let n=e.descripcion?.toLowerCase()||"",i;n.includes("resistencia")&&e.descripcion.includes("1/4 W")||n.includes("led")&&n.includes("diodo")?i=this.cartItems.find(d=>d.id===e.id&&d.descripcion===e.descripcion):i=this.cartItems.find(d=>d.id===e.id),i?i.cantidad+=e.cantidad:this.cartItems.push(g({},e)),this.saveCartToStorage(),this.updateCount()}updateCount(){let e=this.cartItems.length;this.cartItemCountSubject.next(e)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{T as a,v as b,$ as c};
