<nav class="modern-navbar navbar navbar-expand-lg position-sticky top-0">
  <div class="container-fluid px-3 px-lg-4">

    <!-- Logo (solo imagen) -->
    <a class="navbar-brand modern-brand"
       [routerLink]="(isExternal || role === 'Distribuidor' || role === 'Cliente') ? '/store' : '/dashboard'">
      <div class="brand-logo-wrapper">
        <img src="assets/images/LOGIN.png" alt="ALTEC Logo" class="brand-logo">
      </div>
    </a>

    <!-- Badge Altec-Puntos (Centro en desktop, solo para Clientes) -->
    <div class="altec-points-badge d-none d-lg-flex" *ngIf="role === 'Cliente'">
      <i class="bi bi-wallet-fill me-2"></i>
      <span class="points-label">Altec-Puntos:</span>
      <span class="points-value">${{ altecPoints | number:'1.2-2' }}</span>
    </div>

    <!-- Acciones móvil (Carrito + Altec-Puntos) -->
    <div class="mobile-actions d-lg-none">
      <!-- Altec-Puntos móvil -->
      <div class="altec-points-mobile" *ngIf="role === 'Cliente'">
        <i class="bi bi-wallet-fill"></i>
        <span>${{ altecPoints | number:'1.0-0' }}</span>
      </div>

      <!-- Carrito móvil -->
      <a class="cart-icon-mobile"
         *ngIf="isExternal || role === 'Distribuidor' || role === 'Cliente'"
         (click)="navigateToCart()">
        <i class="bi bi-cart-fill"></i>
        <span class="cart-badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
      </a>
    </div>

    <!-- Toggle button (solo móvil) -->
    <button class="navbar-toggler modern-toggler d-lg-none" type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation">
      <span class="toggler-icon"></span>
      <span class="toggler-icon"></span>
      <span class="toggler-icon"></span>
    </button>

    <!-- Menú principal -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">

      <!-- Links de navegación -->
      <ul class="navbar-nav me-auto">

        <!-- Inicio (Solo admin) -->
        <li class="nav-item" *ngIf="!isExternal && role !== 'Distribuidor' && role !== 'Cliente'">
          <a class="nav-link" [routerLink]="['/dashboard']" routerLinkActive="active">
            <i class="bi bi-house-fill me-2"></i>
            <span>Inicio</span>
          </a>
        </li>

        <!-- Inventario (Dropdown - Solo admin) -->
        <li class="nav-item dropdown" *ngIf="!isExternal && role !== 'Distribuidor' && role !== 'Cliente'">
          <a class="nav-link dropdown-toggle" href="#" id="dropdownInventario"
             role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-box-seam-fill me-2"></i>
            <span>Inventario</span>
          </a>
          <ul class="dropdown-menu modern-dropdown">
            <li>
              <a class="dropdown-item" (click)="navigateToBodega()">
                <i class="bi bi-archive-fill me-2"></i>
                Consultar Bodega
              </a>
            </li>
            <li>
              <a class="dropdown-item" (click)="navigateToIngreso()">
                <i class="bi bi-plus-circle-fill me-2"></i>
                Cargar Productos
              </a>
            </li>
          </ul>
        </li>

        <!-- Ventas (Dropdown - Solo admin) -->
        <li class="nav-item dropdown" *ngIf="!isExternal && role !== 'Distribuidor' && role !== 'Cliente'">
          <a class="nav-link dropdown-toggle" href="#" id="dropdownVentas"
             role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-graph-up-arrow me-2"></i>
            <span>Ventas</span>
          </a>
          <ul class="dropdown-menu modern-dropdown">
            <li>
              <a class="dropdown-item" href="#">
                <i class="bi bi-cash-coin me-2"></i>
                Realizar Venta
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="#">
                <i class="bi bi-receipt me-2"></i>
                Ver Ventas
              </a>
            </li>
          </ul>
        </li>

        <!-- Cotizador (Solo admin) -->
        <li class="nav-item" *ngIf="!isExternal && role !== 'Distribuidor' && role !== 'Cliente'">
          <a class="nav-link" (click)="navigateToCotizador()" routerLinkActive="active">
            <i class="bi bi-calculator-fill me-2"></i>
            <span>Cotizador</span>
          </a>
        </li>

        <!-- Altec-Puntos (Solo admin) -->
        <li class="nav-item" *ngIf="!isExternal && role !== 'Distribuidor' && role !== 'Cliente'">
          <a class="nav-link" (click)="navigateToAltecPoints()" routerLinkActive="active">
            <i class="bi bi-star-fill me-2"></i>
            <span>Altec-Puntos</span>
          </a>
        </li>
      </ul>

      <!-- Acciones derecha -->
      <div class="navbar-actions">

        <!-- Rol/Usuario -->
        <div class="user-info">
          <i class="bi bi-person-circle me-2"></i>
          <span class="user-role">{{ isExternal ? 'Invitado' : role }}</span>
        </div>

        <!-- Carrito desktop - SOLO SI HAY ITEMS -->
        <a class="cart-icon-desktop"
           *ngIf="(isExternal || role === 'Distribuidor' || role === 'Cliente') && cartItemCount > 0"
           (click)="navigateToCart()">
          <i class="bi bi-cart-fill"></i>
          <span class="cart-badge">{{ cartItemCount }}</span>
        </a>

        <!-- Botón salir -->
        <a class="logout-btn" (click)="logout()" href="#">
          <i class="bi bi-box-arrow-right me-2"></i>
          <span>Salir</span>
        </a>
      </div>
    </div>
  </div>
</nav>
