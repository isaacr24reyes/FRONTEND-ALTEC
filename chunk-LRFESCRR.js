import{a as k}from"./chunk-NNIYR5GJ.js";import{a as K}from"./chunk-A6HNFRVM.js";import"./chunk-4QRD2FVP.js";import{a as Y}from"./chunk-JBVRINQ4.js";import{c as H}from"./chunk-ZCWIHUB6.js";import"./chunk-HHL5FHZT.js";import{O as J,b as I,d as L,e as R,f as W,g as D,h as B,m as j,n as z,o as G,s as V,t as q}from"./chunk-FAWUY5F4.js";import{$a as u,Aa as p,Ab as T,Eb as O,Fb as _,Ga as e,Ha as t,Ia as c,K as M,Na as g,O as v,P as w,Sb as F,_a as i,ab as E,cb as f,db as h,eb as b,gb as A,ja as l,jb as x,ka as y,mb as P,wa as S,zb as N}from"./chunk-DKTJYUJ3.js";import{h as X}from"./chunk-K4ALXBGI.js";var m=X(Y());function $(s,C){if(s&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),t(),e(11,"td")(12,"button",46),c(13,"i",47),t()()()),s&2){let r,o=C.$implicit;l(2),u(o.name),l(2),u(o.username),l(2),u(o.telefono),l(2),u(o.role),l(2),u((r=o.altec_Points)!==null&&r!==void 0?r:0)}}function ee(s,C){s&1&&(e(0,"tr")(1,"td",48),i(2,"No hay usuarios registrados."),t()())}var U=(()=>{class s{constructor(r){this.accountService=r,this.users=[],this.filteredUsers=[],this.searchTerm="",this.pageSize=6,this.currentPage=1,this.newUser={name:"",telefono:"",role:"Cliente"}}ngOnInit(){this.loadUsers()}loadUsers(){this.accountService.getAllUsers().subscribe({next:r=>{this.users=r,this.filteredUsers=[...this.users]},error:r=>{console.error("\u274C Error al cargar usuarios",r)}})}applyFilter(){let r=this.searchTerm.trim().toLowerCase();r?this.filteredUsers=this.users.filter(o=>(o.name?.toLowerCase()??"").includes(r)):this.filteredUsers=[...this.users],this.currentPage=1}createUser(){if(!this.newUser.name||!this.newUser.telefono){m.default.Report.warning("Campos requeridos","Por favor ingresa <b>nombre</b> y <b>celular</b>.","Entendido");return}m.default.Loading.hourglass("Creando usuario..."),this.accountService.createUser(this.newUser.name,this.newUser.telefono,this.newUser.role).subscribe({next:r=>{m.default.Loading.remove();let o=r.username,n=r.name;m.default.Report.success("Usuario creado",`<br>
             USERNAME: <span style="color:#28a745; font-weight:bold;">${o}</span>`,"Aceptar"),this.loadUsers(),this.newUser={name:"",telefono:"",role:"Cliente"}},error:r=>{m.default.Loading.remove(),console.error("\u274C Error al crear usuario",r),m.default.Report.failure("Error","No se pudo crear el usuario.","Cerrar")}})}get totalPages(){return Math.ceil(this.filteredUsers.length/this.pageSize)}static{this.\u0275fac=function(o){return new(o||s)(y(K))}}static{this.\u0275cmp=v({type:s,selectors:[["app-user-admin"]],standalone:!0,features:[A],decls:81,vars:13,consts:[[1,"login-form"],[1,"text-center"],[1,"container","mt-4"],[1,"row","justify-content-center","mb-3"],[1,"col-12","col-md-6"],["type","search","placeholder","Buscar usuario por nombre...","aria-label","Buscar","name","searchTerm","autocomplete","off",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"row","justify-content-end","mb-3"],[1,"col-12","col-md-4","text-end"],["type","button","data-bs-toggle","modal","data-bs-target","#crearUsuarioModal",1,"btn","btn-success"],[1,"bi","bi-person-plus"],[1,"row"],[1,"col-12"],[1,"table-responsive","shadow"],[1,"table","table-dark","table-hover","text-center","align-middle"],[2,"background-color","#08274F","color","white","font-weight","bold"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"styled-line"],[1,"row","justify-content-between","align-items-center"],[1,"col-12","col-md-auto","mb-2","mb-md-0"],[1,"col-12","col-md-auto"],[1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[1,"text-center","mt-4"],[1,"text-white","small-text"],[2,"color","#8B50FB"],["id","crearUsuarioModal","tabindex","-1","aria-labelledby","crearUsuarioModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","bg-dark","text-white"],[1,"modal-header","border-0"],["id","crearUsuarioModalLabel",1,"modal-title","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close","btn-close-white"],[1,"modal-body"],["autocomplete","off"],[1,"mb-3"],["for","name",1,"form-label"],["id","name","type","text","placeholder","Ej: Juan P\xE9rez","name","name","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],["for","phone",1,"form-label"],["id","phone","type","text","placeholder","Ej: 0987654321","name","telefono","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],["for","role",1,"form-label"],["id","role","name","role",1,"form-select",3,"ngModelChange","ngModel"],["value","Cliente","selected",""],["value","Distribuidor"],[1,"d-grid","gap-2"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"bi","bi-check-circle"],[1,"btn","btn-outline-danger","btn-sm"],[1,"bi","bi-trash"],["colspan","5",1,"text-muted"]],template:function(o,n){o&1&&(e(0,"form",0)(1,"div",1)(2,"h1"),i(3,"\u{1F465} Administrador de Usuarios"),t()(),e(4,"div",2)(5,"div",3)(6,"div",4)(7,"input",5),b("ngModelChange",function(a){return h(n.searchTerm,a)||(n.searchTerm=a),a}),g("input",function(){return n.applyFilter()}),t()()(),e(8,"div",6)(9,"div",7)(10,"button",8),c(11,"i",9),i(12," Crear Usuario "),t()()(),e(13,"div",10)(14,"div",11)(15,"div",12)(16,"table",13)(17,"thead")(18,"tr")(19,"th",14),i(20,"Nombre"),t(),e(21,"th",14),i(22,"Username"),t(),e(23,"th",14),i(24,"Celular"),t(),e(25,"th",14),i(26,"Rol"),t(),e(27,"th",14),i(28,"Altec Puntos"),t(),e(29,"th",14),i(30,"Acciones"),t()()(),e(31,"tbody"),S(32,$,14,5,"tr",15),x(33,"slice"),S(34,ee,3,0,"tr",16),t()()()()(),c(35,"hr",17),e(36,"div",2)(37,"div",18)(38,"div",19)(39,"h5"),i(40),t()(),e(41,"div",20)(42,"button",21),g("click",function(){return n.currentPage=n.currentPage-1}),i(43," Anterior "),t(),e(44,"button",22),g("click",function(){return n.currentPage=n.currentPage+1}),i(45," Siguiente "),t()()()(),e(46,"div",23)(47,"span",24),i(48," Developed by "),e(49,"strong",25),i(50,"SwiFt\xA9"),t(),i(51," (2025). "),t()()()(),e(52,"div",26)(53,"div",27)(54,"div",28)(55,"div",29)(56,"h5",30),i(57,"\u2795 Crear Nuevo Usuario"),t(),c(58,"button",31),t(),e(59,"div",32)(60,"form",33)(61,"div",34)(62,"label",35),i(63,"Nombre"),t(),e(64,"input",36),b("ngModelChange",function(a){return h(n.newUser.name,a)||(n.newUser.name=a),a}),t()(),e(65,"div",34)(66,"label",37),i(67,"Celular"),t(),e(68,"input",38),b("ngModelChange",function(a){return h(n.newUser.telefono,a)||(n.newUser.telefono=a),a}),t()(),e(69,"div",34)(70,"label",39),i(71,"Rol"),t(),e(72,"select",40),b("ngModelChange",function(a){return h(n.newUser.role,a)||(n.newUser.role=a),a}),e(73,"option",41),i(74,"Cliente"),t(),e(75,"option",42),i(76,"Distribuidor"),t()()(),e(77,"div",43)(78,"button",44),g("click",function(){return n.createUser()}),c(79,"i",45),i(80," Guardar "),t()()()()()()()),o&2&&(l(7),f("ngModel",n.searchTerm),l(25),p("ngForOf",P(33,9,n.filteredUsers,(n.currentPage-1)*n.pageSize,n.currentPage*n.pageSize)),l(2),p("ngIf",n.filteredUsers.length===0),l(6),E("Total de usuarios: ",n.filteredUsers.length,""),l(2),p("disabled",n.currentPage===1),l(2),p("disabled",n.currentPage>=n.totalPages),l(20),f("ngModel",n.newUser.name),l(4),f("ngModel",n.newUser.telefono),l(4),f("ngModel",n.newUser.role))},dependencies:[_,N,T,O,V,B,z,G,I,j,L,R,D,W],styles:[".login-form[_ngcontent-%COMP%]{background:#18181c;color:#fff}h1[_ngcontent-%COMP%]{font-weight:700;color:#fff;padding-top:20px}.table[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.5px}.btn[_ngcontent-%COMP%]{border-radius:20px;font-weight:500}.modal-content[_ngcontent-%COMP%]{border-radius:12px}"]})}}return s})();var Q=[{path:"",component:U,canActivate:[k]}];var be=(()=>{class s{static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275mod=w({type:s})}static{this.\u0275inj=M({imports:[_,J,H,q,F.forChild(Q),U]})}}return s})();export{be as UserAdminModule};
