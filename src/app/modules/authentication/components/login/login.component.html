<div class="login-wrapper d-flex align-items-center justify-content-center min-vh-100 position-relative overflow-hidden" #loginContainer>

  <!-- 游 Canvas de neuronas interactivas (alrededor del formulario) -->
  <canvas #neuronCanvas class="neuron-canvas-outer"></canvas>

  <!-- 游꿛 Elementos decorativos de fondo -->
  <div class="bg-gradient-orbs">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
  </div>

  <!-- 游댛 Header con acciones secundarias -->
  <div class="position-absolute top-0 start-0 end-0 p-3 d-flex flex-wrap justify-content-between gap-2" style="z-index: 10;">
    <button type="button" class="btn btn-outline-light btn-sm d-flex align-items-center gap-2" (click)="goToLanding()">
      <i class="bi bi-arrow-left"></i>
      <span>Inicio</span>
    </button>

    <button type="button" class="btn btn-store btn-sm d-flex align-items-center gap-2" (click)="goToStore()">
      <i class="bi bi-shop"></i>
      <span>Visitar tienda</span>
    </button>
  </div>

  <!-- 游닍 Card principal del formulario con Bootstrap -->
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5">
        <div class="card shadow-lg border-0 login-card-bootstrap">
          <div class="card-body p-4 p-md-5">

            <form [formGroup]="formGroup" (ngSubmit)="login()" novalidate>

              <!-- Logo y t칤tulo -->
              <div class="text-center mb-4">
                @defer (on viewport) {
                  <img src="assets/images/LOGIN.png" alt="ALTEC Logo" class="img-fluid mb-3" style="max-width: 180px;">
                } @placeholder {
                  <div class="placeholder-glow mb-3">
                    <div class="placeholder col-6 mx-auto" style="height: 50px;"></div>
                  </div>
                }

                <h1 class="h3 fw-bold text-white mb-2">Bienvenido de vuelta</h1>
                <p class="text-white-50 small">Ingresa tus credenciales para continuar</p>
              </div>

              <!-- Campo Usuario con Bootstrap -->
              <div class="mb-3">
                <label class="form-label text-white fw-semibold d-flex align-items-center gap-2">
                  <i class="bi bi-person-fill text-primary"></i>
                  Usuario
                </label>
                <input
                  type="text"
                  class="form-control form-control-lg bg-dark bg-opacity-50 text-white border-secondary"
                  placeholder="Ingresa tu usuario"
                  autocomplete="off"
                  autocapitalize="off"
                  spellcheck="false"
                  [formControl]="$any(formGroup).controls['username']"
                  [class.is-invalid]="formGroup.get('username')?.hasError('required') && formGroup.get('username')?.touched">

                @if (formGroup.get('username')?.hasError('required') && formGroup.get('username')?.touched) {
                  <div class="invalid-feedback d-flex align-items-center gap-2">
                    <i class="bi bi-exclamation-circle"></i>
                    <span>El usuario es requerido</span>
                  </div>
                }
              </div>

              <!-- Campo Contrase침a con Bootstrap -->
              <div class="mb-4">
                <label class="form-label text-white fw-semibold d-flex align-items-center gap-2">
                  <i class="bi bi-lock-fill text-primary"></i>
                  Contrase침a
                </label>
                <input
                  type="password"
                  class="form-control form-control-lg bg-dark bg-opacity-50 text-white border-secondary"
                  placeholder="Ingresa tu contrase침a"
                  autocomplete="off"
                  autocapitalize="off"
                  spellcheck="false"
                  [formControl]="$any(formGroup).controls['password']"
                  [class.is-invalid]="formGroup.get('password')?.hasError('required') && formGroup.get('password')?.touched">

                @if (formGroup.get('password')?.hasError('required') && formGroup.get('password')?.touched) {
                  <div class="invalid-feedback d-flex align-items-center gap-2">
                    <i class="bi bi-exclamation-circle"></i>
                    <span>La contrase침a es requerida</span>
                  </div>
                }
              </div>

              <!-- Bot칩n de Login con Bootstrap -->
              <div class="d-grid mb-3">
                <button
                  type="submit"
                  class="btn btn-primary btn-lg fw-semibold d-flex align-items-center justify-content-center gap-2"
                  [disabled]="!formGroup.valid || isLoading">

                  @if (isLoading) {
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    <span>Autenticando...</span>
                  } @else {
                    <i class="bi bi-box-arrow-in-right"></i>
                    <span>Iniciar sesi칩n</span>
                  }
                </button>
              </div>

              <!-- Footer -->
              <div class="text-center mt-4">
                <p class="text-white-50 small mb-0">
                  Powered by <strong class="brand-purple">SwiFt춸</strong> 2025
                </p>
              </div>

            </form>

          </div>
        </div>

        <!-- 游 Badge de seguridad -->
        <div class="d-flex align-items-center justify-content-center gap-2 mt-3 text-success">
          <i class="bi bi-shield-check"></i>
          <span class="small">Conexi칩n segura SSL</span>
        </div>

      </div>
    </div>
  </div>

</div>
