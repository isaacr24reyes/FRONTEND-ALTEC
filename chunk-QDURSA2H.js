import{a as ye}from"./chunk-3VDAE7W5.js";import{a as L,b as Pe,c as H}from"./chunk-KNP5KXFG.js";import"./chunk-4QRD2FVP.js";import{a as se}from"./chunk-E42FEA2W.js";import{c as Se}from"./chunk-QUSHO67F.js";import{O as ve,b as de,d as me,e as j,g as pe,h as U,i as ue,k as G,l as ge,m as fe,n as he,o as be,p as _e,q as xe,r as Ce,s as W,t as E}from"./chunk-AJCMZLG5.js";import{$a as S,Aa as d,Cb as R,Db as q,Ga as n,Ha as o,Ia as p,Ja as oe,K as ie,Ka as re,La as y,Na as m,O as T,Oa as g,Ob as le,P as ne,Qb as ce,U as C,V as v,Za as F,_a as r,ab as x,cb as D,db as A,eb as z,gb as V,ha as I,hb as ae,ja as c,jb as P,ka as b,lb as M,mb as N,w as ee,wa as _,y as te,yb as $,zb as B}from"./chunk-DGXXNF4P.js";import{a as k,b as Q,g as Z}from"./chunk-ODN5LVDJ.js";var w=Z(se());var Te=()=>({standalone:!0});function Ie(l,u){if(l&1){let e=y();n(0,"label",63)(1,"input",64),m("change",function(t){C(e);let a=g();return v(a.onCategoryChange(t))}),o(),n(2,"span"),r(3),o()()}if(l&2){let e=u.$implicit,i=g();c(),d("value",e)("checked",i.selectedCategories.includes(e)),c(2),S(e)}}function Fe(l,u){if(l&1){let e=y();n(0,"label",63)(1,"input",64),m("change",function(t){C(e);let a=g();return v(a.onCategoryChange(t))}),o(),n(2,"span"),r(3),o()()}if(l&2){let e=u.$implicit,i=g();c(),d("value",e)("checked",i.selectedCategories.includes(e)),c(2),S(e)}}function De(l,u){if(l&1&&(oe(0),p(1,"img",77),re()),l&2){let e=g().$implicit;c(),d("src",e.foto,I)("alt",e.descripcion)}}function Ae(l,u){l&1&&(n(0,"div",78),r(1,"Sin imagen"),o())}function ze(l,u){if(l&1){let e=y();n(0,"div",65)(1,"div",66)(2,"div",67),_(3,De,2,2,"ng-container",68)(4,Ae,2,0,"ng-template",null,0,N),o(),n(6,"div",69)(7,"h5",70),r(8),o(),n(9,"p",71),r(10),P(11,"currency"),o(),n(12,"div",72),r(13),o(),n(14,"div",73)(15,"input",74),z("ngModelChange",function(t){let a=C(e).$implicit;return A(a.cantidad,t)||(a.cantidad=t),v(t)}),o(),n(16,"button",75),m("click",function(){let t=C(e).$implicit,a=g();return v(a.addToCart(t))}),p(17,"i",76),r(18," Agregar "),o()()()()()}if(l&2){let e=u.$implicit,i=F(5),t=g();c(3),d("ngIf",e.foto&&e.foto!=="NOT-IMAGE")("ngIfElse",i),c(5),x(" ",e.descripcion," "),c(2),x(" ",t.isDistribuidor?"$"+e.precioMayorista:M(11,7,e.pvp,"USD")," "),c(3),x(" ",e.categoria||"Sin categor\xEDa"," "),c(2),D("ngModel",e.cantidad),d("ngModelOptions",ae(10,Te))}}function Ve(l,u){if(l&1&&(n(0,"option",79),r(1),o()),l&2){let e=u.$implicit;d("value",e),c(),S(e)}}var J=(()=>{class l{constructor(e,i,t,a){this.productService=e,this.fb=i,this.loaderService=t,this.cartService=a,this.allProducts=[],this.products=[],this.totalCount=0,this.currentPage=1,this.totalPages=0,this.pageSize=12,this.searchTerm="",this.selectedProduct=null,this.selectedValue="",this.resistorValues=["100\u03A9","220\u03A9","330\u03A9","470\u03A9","1k\u03A9","2.2k\u03A9","4.7k\u03A9","10k\u03A9"],this.categories=["Audio y video","Baquelitas","Componentes Electr\xF3nicos","Compuertas e Integrados","Electricidad","Fuentes","Herramientas","Microcontroladores y Arduinos","Modulos y Sensores","Motores","Parlantes","Pilas y Baterias","Plugs y Conectores","Protoboards","Proyectos Y kits","Redes y Comunicaci\xF3n","Transformadores","Otros"],this.selectedCategories=[],this.isDistribuidor=!1,this.distribuidorName=""}ngOnInit(){if(this.isDistribuidor=sessionStorage.getItem("isDistribuidor")==="true",this.isDistribuidor){let e=sessionStorage.getItem("userInfo");if(e)try{let i=JSON.parse(e);this.distribuidorName=i.name??""}catch(i){console.error("Error al parsear userInfo:",i)}}w.default.Notify.init({position:"left-top",timeout:1e3,clickToClose:!0}),this.formGroup=this.fb.group({searchTerm:[""]}),this.formGroup.get("searchTerm").valueChanges.pipe(ee(300),te()).subscribe(()=>{this.currentPage=1,this.applyFilter()}),this.loaderService.start(),this.loadProducts()}addToCart(e){let i=e.descripcion?.toLowerCase()||"";if(i.includes("resistencia")&&e.descripcion.includes("1/4 W")){this.selectedProduct=e,this.selectedValue="",new window.bootstrap.Modal(document.getElementById("resistorModal")).show();return}if(i.includes("led")&&i.includes("diodo")){this.selectedProduct=e,this.selectedValue="",new window.bootstrap.Modal(document.getElementById("ledModal")).show();return}this.cartService.addToCart(e),w.default.Notify.success(`Agregado ${e.cantidad} x ${e.descripcion} al carrito`)}confirmAddResistor(){if(!this.selectedValue){w.default.Notify.warning("Selecciona un valor de resistencia");return}let e=Q(k({},this.selectedProduct),{descripcion:`${this.selectedProduct.descripcion} - ${this.selectedValue}`});this.cartService.addToCart(e),w.default.Notify.success(`Agregado ${e.cantidad} x ${e.descripcion} al carrito`);let i=document.getElementById("resistorModal"),t=window.bootstrap.Modal.getInstance(i);t?.hide(),t?.hide()}loadProducts(){(sessionStorage.getItem("isDistribuidor")==="true"?this.productService.getProductsImport():this.productService.getProductsClient(1,1e3,"")).subscribe({next:t=>{let a=Array.isArray(t)?t:t?.items??[];this.allProducts=a.map(s=>Q(k({},s),{cantidad:1,_normDesc:this.normalizeText(`${s.descripcion??""}`),_normCode:this.normalizeText(`${s.codigo??""}`)})),this.applyFilter(),this.loaderService.finish()},error:t=>{console.error("Error al obtener productos:",t),this.loaderService.finish()}})}confirmAddLed(){if(!this.selectedProduct||!this.selectedValue)return;let e=k({},this.selectedProduct);e.descripcion+=` - ${this.selectedValue}`,this.cartService.addToCart(e),w.default.Notify.success(`Agregado ${e.cantidad} x ${e.descripcion} al carrito`);let i=document.getElementById("ledModal");window.bootstrap.Modal.getInstance(i)?.hide()}applyFilter(){let e=this.formGroup.get("searchTerm").value||"",i=this.tokenize(e),t=this.allProducts;i.length&&(t=this.allProducts.map(s=>{let h=s._normDesc,f=s._normCode,K=i.every(O=>this.textContainsToken(h,O)||this.textContainsToken(f,O))?this.scoreMatch(h,f,i):-1;return{p:s,score:K}}).filter(s=>s.score>=0).sort((s,h)=>h.score-s.score).map(s=>s.p)),this.selectedCategories.length>0&&(t=t.filter(s=>this.selectedCategories.includes(s.categoria))),this.totalCount=t.length,this.totalPages=Math.ceil(this.totalCount/this.pageSize)||1;let a=(this.currentPage-1)*this.pageSize;this.products=t.slice(a,a+this.pageSize)}normalizeText(e){return(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g," ").trim()}tokenize(e){return this.normalizeText(e).match(/[a-z0-9]+/gi)?.map(t=>this.normalizeText(t))??[]}stem(e){return e.replace(/(es|s)$/i,"")}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}textContainsToken(e,i){if(!e||!i)return!1;let t=this.escapeRegExp(i),a=this.escapeRegExp(this.stem(i));return e.includes(i)||a&&e.includes(a)||new RegExp(`\\b${t}`,"i").test(e)||new RegExp(`${t}\\b`,"i").test(e)}scoreMatch(e,i,t){let a=0;for(let f of t){let X=this.textContainsToken(i,f),K=this.textContainsToken(e,f);X&&(a+=10),K&&(a+=4);let O=this.escapeRegExp(f);new RegExp(`\\b${O}\\b`).test(e)&&(a+=2),new RegExp(`\\b${O}\\b`).test(i)&&(a+=4),e.startsWith(f)&&(a+=2),i.startsWith(f)&&(a+=3)}let s=t.every(f=>this.textContainsToken(e,f)),h=t.every(f=>this.textContainsToken(i,f));return s&&(a+=5),h&&(a+=8),a}onSearchChange(){this.currentPage=1,this.applyFilter()}onPreviousPage(){this.currentPage>1&&(this.currentPage--,this.applyFilter())}onNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.applyFilter())}onSubmit(){this.applyFilter()}onCategoryChange(e){let i=e.target.value;e.target.checked?this.selectedCategories.includes(i)||this.selectedCategories.push(i):this.selectedCategories=this.selectedCategories.filter(a=>a!==i),this.formGroup.get("searchTerm")?.setValue(""),this.currentPage=1,this.applyFilter()}clearFilters(){this.formGroup.get("searchTerm")?.setValue(""),this.selectedCategories=[],this.currentPage=1,this.applyFilter()}static{this.\u0275fac=function(i){return new(i||l)(b(ye),b(Ce),b(Pe),b(L))}}static{this.\u0275cmp=T({type:l,selectors:[["app-store"]],standalone:!0,features:[V],decls:105,vars:12,consts:[["noImage",""],[1,"product-quote-form",3,"ngSubmit","formGroup"],[1,"text-center"],[1,"store-title"],[1,"store-subtitle"],[1,"container","mt-3"],[1,"d-flex","justify-content-center","gap-2"],["type","search","placeholder","Buscar producto...","aria-label","Search","formControlName","searchTerm",1,"form-control",2,"max-width","700px",3,"input"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#filtersOffcanvas","aria-controls","filtersOffcanvas",1,"btn","btn-outline-light","d-inline-flex","d-md-none","align-items-center"],[1,"bi","bi-funnel"],[1,"ms-2"],[1,"container-fluid","w-90","mt-4"],[1,"row","g-3"],[1,"col-md-3","d-none","d-md-block"],[1,"card","shadow-sm",2,"background","#121a20","border","1px solid rgba(255,255,255,0.08)","color","#e6f1f6","border-radius","16px","position","sticky","top","88px"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center"],[1,"bi","bi-funnel","me-2"],[1,"d-grid","gap-2","mb-3"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mb-2","text-uppercase",2,"font-size",".85rem","color","#9bb9c9","letter-spacing",".3px"],[1,"d-grid","gap-2"],["class","d-flex align-items-center gap-2 p-2 rounded","style","background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.06);",4,"ngFor","ngForOf"],["tabindex","-1","id","filtersOffcanvas",1,"offcanvas","offcanvas-start","bg-dark","text-white","d-md-none"],[1,"offcanvas-header"],[1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],["type","button","data-bs-dismiss","offcanvas",1,"btn","btn-primary",3,"click"],[1,"col-12","col-md-9"],[1,"row","row-cols-2","row-cols-lg-4","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-3","px-2"],[1,"mb-0","fw-bold","text-white"],[1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[1,"text-center","mt-5"],[1,"text-white","small-text"],[2,"color","#8B50FB"],["id","resistorModal","tabindex","-1","aria-labelledby","resistorModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","bg-dark","text-white",2,"border-radius","12px"],[1,"modal-header"],["id","resistorModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close","btn-close-white"],[1,"modal-body"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"btn","btn-primary",3,"click"],["id","ledModal","tabindex","-1","aria-labelledby","ledModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-content","bg-dark","text-white"],["id","ledModalLabel",1,"modal-title"],["value","","disabled","","selected",""],["value","Rojo"],["value","Verde"],["value","Azul"],["value","Amarillo"],["value","Blanco"],["type","button",1,"btn","btn-light",3,"click"],[1,"d-flex","align-items-center","gap-2","p-2","rounded",2,"background","rgba(255,255,255,0.04)","border","1px solid rgba(255,255,255,0.06)"],["type","checkbox",3,"change","value","checked"],[1,"col"],[1,"card","product-card","h-100","shadow-sm",2,"background","#0f151b","border","1px solid rgba(255,255,255,0.06)","border-radius","16px","min-height","400px"],[1,"product-img-container",2,"background","#0c1116","height","220px","display","grid","place-items","center","border-bottom","1px solid rgba(255,255,255,0.06)","border-top-left-radius","16px","border-top-right-radius","16px","overflow","hidden"],[4,"ngIf","ngIfElse"],[1,"card-body","d-flex","flex-column","justify-content-between"],[1,"card-title","product-title",2,"color","#e6f1f6","font-size","1.05rem","line-height","1.25","min-height","52px"],[1,"product-price","mb-2",2,"color","greenyellow","font-weight","800","font-size","1.75rem"],[1,"text-uppercase","mb-1",2,"font-size",".75rem","color","#9bb9c9","letter-spacing",".3px","opacity",".9"],[1,"d-flex","align-items-center","gap-2","mt-auto"],["type","number","min","1",1,"form-control","quantity-input",2,"background","#0c1116","color","#e6f1f6","border","1px solid rgba(255,255,255,0.08)","max-width","80px",3,"ngModelChange","ngModel","ngModelOptions"],[1,"btn","btn-primary","flex-grow-1",2,"border-radius","12px",3,"click"],[1,"bi","bi-cart-plus"],[1,"card-img-top","product-img",2,"max-height","100%","max-width","100%","object-fit","contain",3,"src","alt"],[1,"no-image-text",2,"color","#9bb9c9","font-size","1rem"],[3,"value"]],template:function(i,t){i&1&&(p(0,"app-loader"),n(1,"form",1),m("ngSubmit",function(){return t.onSubmit()}),n(2,"div",2)(3,"h1",3),r(4),o(),n(5,"h2",4),r(6),o()(),n(7,"div",5)(8,"div",6)(9,"input",7),m("input",function(){return t.onSearchChange()}),o(),n(10,"button",8),p(11,"i",9),n(12,"span",10),r(13,"Filtros"),o()()()()(),n(14,"div",11)(15,"div",12)(16,"aside",13)(17,"div",14)(18,"div",15)(19,"h5",16),p(20,"i",17),r(21," Filtros "),o(),n(22,"div",18)(23,"button",19),m("click",function(){return t.clearFilters()}),r(24,"Limpiar filtros"),o()(),n(25,"div",20),r(26,"Categor\xEDas"),o(),n(27,"div",21),_(28,Ie,4,3,"label",22),o()()()(),n(29,"div",23)(30,"div",24)(31,"h5",25),p(32,"i",17),r(33,"Filtros"),o(),p(34,"button",26),o(),n(35,"div",27)(36,"div",18)(37,"button",19),m("click",function(){return t.clearFilters()}),r(38,"Limpiar filtros"),o(),n(39,"button",28),m("click",function(){return t.applyFilter()}),r(40,"Aplicar"),o()(),n(41,"div",20),r(42,"Categor\xEDas"),o(),n(43,"div",21),_(44,Fe,4,3,"label",22),o()()(),n(45,"section",29)(46,"div",30),_(47,ze,19,11,"div",31),o(),n(48,"div",32)(49,"p",33),r(50),o(),n(51,"div")(52,"button",34),m("click",function(){return t.onPreviousPage()}),r(53,"Anterior"),o(),n(54,"button",35),m("click",function(){return t.onNextPage()}),r(55,"Siguiente"),o()()()()(),n(56,"div",36)(57,"span",37),r(58," Developed by "),n(59,"strong",38),r(60,"SwiFt\xA9"),o(),r(61," (2025). "),o()()(),n(62,"div",39)(63,"div",40)(64,"div",41)(65,"div",42)(66,"h5",43),r(67,"Selecciona el valor de resistencia"),o(),p(68,"button",44),o(),n(69,"div",45)(70,"label",46),r(71,"Valor disponible:"),o(),n(72,"select",47),z("ngModelChange",function(s){return A(t.selectedValue,s)||(t.selectedValue=s),s}),n(73,"option",48),r(74,"-- Selecciona un valor --"),o(),_(75,Ve,2,2,"option",49),o()(),n(76,"div",50)(77,"button",51),r(78,"Cancelar"),o(),n(79,"button",52),m("click",function(){return t.confirmAddResistor()}),r(80,"Agregar al carrito"),o()()()()(),n(81,"div",53)(82,"div",40)(83,"div",54)(84,"div",42)(85,"h5",55),r(86,"Seleccionar tipo de LED"),o(),p(87,"button",44),o(),n(88,"div",45)(89,"select",47),z("ngModelChange",function(s){return A(t.selectedValue,s)||(t.selectedValue=s),s}),n(90,"option",56),r(91,"Selecciona color del LED"),o(),n(92,"option",57),r(93,"Rojo"),o(),n(94,"option",58),r(95,"Verde"),o(),n(96,"option",59),r(97,"Azul"),o(),n(98,"option",60),r(99,"Amarillo"),o(),n(100,"option",61),r(101,"Blanco"),o()()(),n(102,"div",50)(103,"button",62),m("click",function(){return t.confirmAddLed()}),r(104,"Agregar al carrito"),o()()()()()),i&2&&(c(),d("formGroup",t.formGroup),c(3),x(" ",t.isDistribuidor?"Hola "+t.distribuidorName+"!":"\xA1Bienvenid@ a nuestra Tienda!"," "),c(2),x(" ",t.isDistribuidor?"Explora tus productos exclusivos con precios mayoristas":"Echa un vistazo a nuestros productos y disfruta de la compra Online"," "),c(22),d("ngForOf",t.categories),c(16),d("ngForOf",t.categories),c(3),d("ngForOf",t.products),c(3),x("Total de productos: ",t.totalCount,""),c(2),d("disabled",t.currentPage===1),c(2),d("disabled",t.currentPage===t.totalPages),c(18),D("ngModel",t.selectedValue),c(3),d("ngForOf",t.resistorValues),c(14),D("ngModel",t.selectedValue))},dependencies:[W,U,he,be,de,ue,fe,me,j,_e,pe,$,E,G,ge,R,B,H],styles:[".product-quote-form[_ngcontent-%COMP%]{background:#18181c}.product-quote-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#229ebd;font-family:Montserrat,sans-serif;font-weight:1000;font-size:50px;padding-top:20px}.product-quote-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#b6b2a8;font-family:Montserrat,sans-serif;font-weight:1000;font-size:20px}.product-quote-form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .product-quote-form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff;font-family:Acephimere,sans-serif;font-weight:1000;font-size:18px;margin-right:10px}.product-quote-form[_ngcontent-%COMP%]   .small-text[_ngcontent-%COMP%]{font-size:.75rem}@media (max-width: 576px){.product-quote-form[_ngcontent-%COMP%]   .product-img-container[_ngcontent-%COMP%]{height:120px}.product-quote-form[_ngcontent-%COMP%]   .store-title[_ngcontent-%COMP%]{font-size:1.5rem}.product-quote-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:13px}}.card-img-top[_ngcontent-%COMP%]{height:240px;object-fit:cover;border-bottom:1px solid #444}[_nghost-%COMP%]{display:block;background-color:#18181c;min-height:100vh;padding-bottom:2rem}.product-card[_ngcontent-%COMP%]{min-height:320px;border-radius:10px;overflow:hidden;background-color:#fff;display:flex;flex-direction:column;transition:transform .2s ease,box-shadow .2s ease}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 20px #00000026}.product-card[_ngcontent-%COMP%]   .product-img-container[_ngcontent-%COMP%]{height:520px;background-color:#fff;display:flex;align-items:center;justify-content:center}.product-card[_ngcontent-%COMP%]   .product-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .product-card[_ngcontent-%COMP%]   .product-img-container[_ngcontent-%COMP%]   .product-img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:contain}.product-card[_ngcontent-%COMP%]   .product-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;min-height:40px;color:#fff}.product-card[_ngcontent-%COMP%]   .btn-add-cart[_ngcontent-%COMP%]{background-color:#007bff;border:none;font-weight:500;transition:background-color .2s ease;font-size:.9rem}.product-card[_ngcontent-%COMP%]   .btn-add-cart[_ngcontent-%COMP%]:hover{background-color:#0056b3}.product-card[_ngcontent-%COMP%]   .btn-add-cart[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:0}.quantity-input[_ngcontent-%COMP%]{width:60px;padding:5px 8px;border-radius:10px;border:1px solid #ccc;text-align:center;font-size:.9rem}.quantity-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 3px #007bff80}.no-image-text[_ngcontent-%COMP%]{height:160px;display:flex;align-items:center;justify-content:center;font-size:.95rem;font-weight:500;color:#000;background-color:#fff;border-radius:6px}.w-90[_ngcontent-%COMP%]{width:95%!important;margin:0 auto}"]})}}return l})();var Ee=Z(se());function Ne(l,u){if(l&1&&p(0,"img",24),l&2){let e=g().$implicit;d("src",e.foto,I)}}function $e(l,u){l&1&&(n(0,"span",25),r(1,"Sin imagen"),o())}function Be(l,u){if(l&1){let e=y();n(0,"tr")(1,"td",19),_(2,Ne,1,1,"img",20)(3,$e,2,0,"ng-template",null,0,N),o(),n(5,"td"),r(6),o(),n(7,"td",19)(8,"input",21),m("input",function(t){let a=C(e).$implicit,s=g();return v(s.onCantidadChange(a,t))}),o()(),n(9,"td",19),r(10),P(11,"currency"),o(),n(12,"td",19),r(13),P(14,"currency"),o(),n(15,"td",19)(16,"button",22),m("click",function(){let t=C(e).$implicit,a=g();return v(a.removeItem(t))}),p(17,"i",23),o()()()}if(l&2){let e=u.$implicit,i=F(4),t=g();c(2),d("ngIf",e.foto&&e.foto!=="NOT-IMAGE")("ngIfElse",i),c(4),S(e.descripcion),c(2),d("value",e.cantidad),c(2),S(M(11,6,t.itemPrecioUnitario(e),"USD")),c(3),S(M(14,9,t.itemPrecioUnitario(e)*e.cantidad,"USD"))}}var Y=(()=>{class l{constructor(e,i,t){this.cartService=e,this.router=i,this.fb=t,this.cart=[],this.total=0,this.role=""}ngOnInit(){this.formGroup=this.fb.group({});let e=localStorage.getItem("userInfo");this.role=e?JSON.parse(e).role.toLowerCase():"",this.cart=this.cartService.getCart(),this.calculateTotal()}itemPrecioUnitario(e){return this.role==="distribuidor"&&e.precioMayorista!==void 0&&e.precioMayorista!==null?e.precioMayorista:e.pvp}onCantidadChange(e,i){let t=i.target,a=Math.max(1,parseInt(t.value,10));e.cantidad!==a&&(e.cantidad=a,this.recalcularTotal())}calculateTotal(){this.total=this.cart.reduce((e,i)=>e+this.itemPrecioUnitario(i)*i.cantidad,0)}recalcularTotal(){this.total=this.cart.reduce((e,i)=>e+this.itemPrecioUnitario(i)*i.cantidad,0)}removeItem(e){this.cart=this.cart.filter(i=>e.descripcion?.toLowerCase().includes("resistencia")&&e.descripcion.includes("1/4 W")||e.descripcion?.toLowerCase().includes("led")&&e.descripcion.toLowerCase().includes("diodo")?!(i.id===e.id&&i.descripcion===e.descripcion):i.id!==e.id),this.cartService.setCart(this.cart),this.calculateTotal(),this.cart.length===0&&Ee.default.Report.info("Carrito vac\xEDo","Tu carrito est\xE1 vac\xEDo.<br>\xA1Sigue explorando nuestros productos!","Ir a la tienda",()=>this.router.navigate(["/store"]))}finalizarCompra(){if(this.cart.length===0)return;let e="\u{1F9FE} *Cotizaci\xF3n de productos*%0A%0A";this.cart.forEach((a,s)=>{let h=this.itemPrecioUnitario(a);e+=`*${s+1}.* ${a.descripcion}%0A`,e+=`Cantidad: ${a.cantidad}%0A`,e+=`Precio Unitario: $${h.toFixed(2)}%0A`,e+=`Subtotal: $${(h*a.cantidad).toFixed(2)}%0A%0A`}),e+=`\u{1F7E2} *Total: $${this.total.toFixed(2)}*%0A`,e+="%0AGracias por su preferencia.";let t=`https://wa.me/593995159078?text=${e}`;window.open(t,"_blank")}goBackToStore(){this.router.navigate(["/store"])}onSubmit(){}static{this.\u0275fac=function(i){return new(i||l)(b(L),b(le),b(xe))}}static{this.\u0275cmp=T({type:l,selectors:[["app-detail-purchase"]],standalone:!0,features:[V],decls:42,vars:6,consts:[["noImg",""],[1,"product-quote-form",3,"ngSubmit","formGroup"],[1,"container","d-flex","justify-content","mb-3"],["type","button",1,"btn","btn-outline-light","mt-4",3,"click"],[1,"bi","bi-arrow-left"],[1,"text-center"],[1,"store-title","fs-1","fs-sm-3","fs-md-2"],[1,"store-subtitle","fs-md-2","fs-sm-3","fs-5"],[1,"container","mt-4"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover","bg-white"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"text-end","mt-3"],[1,"no-inspect",2,"color","#90ee90","font-size","1.8rem"],[1,"btn","btn-success","mt-2",3,"click"],[1,"text-center","mt-5"],[1,"text-white","small-text"],[2,"color","#8B50FB"],[1,"text-center","align-middle"],["width","60","height","60","class","img-fluid",3,"src",4,"ngIf","ngIfElse"],["type","number","min","1",1,"form-control","text-center",2,"max-width","80px","margin","0 auto",3,"input","value"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash"],["width","60","height","60",1,"img-fluid",3,"src"],[1,"text-muted"]],template:function(i,t){i&1&&(p(0,"app-loader"),n(1,"form",1),m("ngSubmit",function(){return t.onSubmit()}),n(2,"div",2)(3,"button",3),m("click",function(){return t.goBackToStore()}),p(4,"i",4),r(5," Seguir Comprando "),o()(),n(6,"div",5)(7,"h1",6),r(8,"\u{1F6CD}\uFE0F Detalle de tu compra"),o(),n(9,"h2",7),r(10," Aqu\xED puedes revisar los productos que agregaste al carrito "),o()(),n(11,"div",8)(12,"div",9)(13,"table",10)(14,"thead",11)(15,"tr")(16,"th"),r(17,"Imagen"),o(),n(18,"th"),r(19,"Descripci\xF3n"),o(),n(20,"th"),r(21,"Cantidad"),o(),n(22,"th"),r(23,"Precio Unitario"),o(),n(24,"th"),r(25,"Subtotal"),o(),n(26,"th"),r(27,"Eliminar"),o()()(),n(28,"tbody"),_(29,Be,18,12,"tr",12),o()()(),n(30,"div",13)(31,"h4",14),r(32),P(33,"currency"),o(),n(34,"button",15),m("click",function(){return t.finalizarCompra()}),r(35,"Finalizar compra"),o(),n(36,"div",16)(37,"span",17),r(38," Developed by "),n(39,"strong",18),r(40,"SwiFt\xA9"),o(),r(41," (2025). "),o()()()()()),i&2&&(c(),d("formGroup",t.formGroup),c(28),d("ngForOf",t.cart),c(3),x(" Total: ",M(33,3,t.total,"USD")," "))},dependencies:[q,$,B,R,H,W,U,j,E,G],styles:["table[_ngcontent-%COMP%]{font-size:.95rem}img[_ngcontent-%COMP%]{object-fit:cover;border-radius:5px}.product-quote-form[_ngcontent-%COMP%]{background:#18181c}.product-quote-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-family:Montserrat,sans-serif;font-weight:1000;font-size:50px;padding-top:20px}.product-quote-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-family:Montserrat,sans-serif;font-weight:1000;font-size:20px;padding-top:20px}.product-quote-form[_ngcontent-%COMP%]   .small-text[_ngcontent-%COMP%]{font-size:.75rem}.product-quote-form[_ngcontent-%COMP%]   .styled-line[_ngcontent-%COMP%]{height:7px;background-color:#8b50fb;margin:20px auto;width:70%}.product-quote-form[_ngcontent-%COMP%]   .eliminar-columna[_ngcontent-%COMP%]{display:none}.no-inspect[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;pointer-events:none}"]})}}return l})();var we=[{path:"",component:J},{path:"detail-purchase",component:Y}];var mt=(()=>{class l{static{this.\u0275fac=function(i){return new(i||l)}}static{this.\u0275mod=ne({type:l})}static{this.\u0275inj=ie({imports:[q,ve,Se,ce.forChild(we),E,J,Y]})}}return l})();export{mt as StoreModule};
