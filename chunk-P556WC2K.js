import{v as et}from"./chunk-T7CDQQO6.js";import{$ as A,B as K,E as O,Hb as I,J as u,Jb as Y,K as S,Kb as tt,L as m,M as o,P as j,R as k,Y as E,i as L,k as d,ka as U,l as x,n as P,o as N,p as W,pb as Q,v as Z,x as v}from"./chunk-KNBDUQWY.js";import{a as R}from"./chunk-K4ALXBGI.js";var f=class{},nt=(()=>{class e extends f{getTranslation(t){return L({})}static \u0275fac=(()=>{let t;return function(s){return(t||(t=E(e)))(s||e)}})();static \u0275prov=u({token:e,factory:e.\u0275fac})}return e})(),b=class{},st=(()=>{class e{handle(t){return t.key}static \u0275fac=function(n){return new(n||e)};static \u0275prov=u({token:e,factory:e.\u0275fac})}return e})();function M(e,a){if(e===a)return!0;if(e===null||a===null)return!1;if(e!==e&&a!==a)return!0;let t=typeof e,n=typeof a,s,i,r;if(t==n&&t=="object")if(Array.isArray(e)){if(!Array.isArray(a))return!1;if((s=e.length)==a.length){for(i=0;i<s;i++)if(!M(e[i],a[i]))return!1;return!0}}else{if(Array.isArray(a))return!1;r=Object.create(null);for(i in e){if(!M(e[i],a[i]))return!1;r[i]=!0}for(i in a)if(!(i in r)&&typeof a[i]<"u")return!1;return!0}return!1}function h(e){return typeof e<"u"&&e!==null}function D(e){return F(e)&&!J(e)&&e!==null}function F(e){return typeof e=="object"}function J(e){return Array.isArray(e)}function X(e){return typeof e=="string"}function ut(e){return typeof e=="function"}function _(e,a){let t=Object.assign({},e);return F(e)?(F(e)&&F(a)&&Object.keys(a).forEach(n=>{D(a[n])?n in e?t[n]=_(e[n],a[n]):Object.assign(t,{[n]:a[n]}):Object.assign(t,{[n]:a[n]})}),t):_({},a)}function H(e,a){let t=a.split(".");a="";do a+=t.shift(),h(e)&&h(e[a])&&(D(e[a])||J(e[a])||!t.length)?(e=e[a],a=""):t.length?a+=".":e=void 0;while(t.length);return e}function ht(e,a,t){let n=a.split("."),s=e;for(let i=0;i<n.length;i++){let r=n[i];i===n.length-1?s[r]=t:((!s[r]||!D(s[r]))&&(s[r]={}),s=s[r])}}var g=class{},it=(()=>{class e extends g{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,n){if(X(t))return this.interpolateString(t,n);if(ut(t))return this.interpolateFunction(t,n)}interpolateFunction(t,n){return t(n)}interpolateString(t,n){return n?t.replace(this.templateMatcher,(s,i)=>{let r=H(n,i);return h(r)?r:s}):t}static \u0275fac=(()=>{let t;return function(s){return(t||(t=E(e)))(s||e)}})();static \u0275prov=u({token:e,factory:e.\u0275fac})}return e})(),p=class{},rt=(()=>{class e extends p{compile(t,n){return t}compileTranslations(t,n){return t}static \u0275fac=(()=>{let t;return function(s){return(t||(t=E(e)))(s||e)}})();static \u0275prov=u({token:e,factory:e.\u0275fac})}return e})(),T=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new A;onLangChange=new A;onDefaultLangChange=new A},G=new m("ISOLATE_TRANSLATE_SERVICE"),B=new m("USE_DEFAULT_LANG"),$=new m("DEFAULT_LANGUAGE"),q=new m("USE_EXTEND"),C=e=>d(e)?e:L(e),c=(()=>{class e{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(t){this.store.defaultLang=t}get currentLang(){return this.store.currentLang}set currentLang(t){this.store.currentLang=t}get langs(){return this.store.langs}set langs(t){this.store.langs=t}get translations(){return this.store.translations}set translations(t){this.store.translations=t}constructor(t,n,s,i,r,V=!0,l=!1,y=!1,w){this.store=t,this.currentLoader=n,this.compiler=s,this.parser=i,this.missingTranslationHandler=r,this.useDefaultLang=V,this.extend=y,l&&(this.store=new T),w&&this.setDefaultLang(w)}setDefaultLang(t){if(t===this.defaultLang)return;let n=this.retrieveTranslations(t);typeof n<"u"?(this.defaultLang==null&&(this.defaultLang=t),n.pipe(v(1)).subscribe(()=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(this.lastUseLanguage=t,t===this.currentLang)return L(this.translations[t]);this.currentLang||(this.currentLang=t);let n=this.retrieveTranslations(t);return d(n)?(n.pipe(v(1)).subscribe(()=>{this.changeLang(t)}),n):(this.changeLang(t),L(this.translations[t]))}changeLang(t){t===this.lastUseLanguage&&(this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang==null&&this.changeDefaultLang(t))}retrieveTranslations(t){if(typeof this.translations[t]>"u"||this.extend)return this._translationRequests[t]=this._translationRequests[t]||this.loadAndCompileTranslations(t),this._translationRequests[t]}getTranslation(t){return this.loadAndCompileTranslations(t)}loadAndCompileTranslations(t){this.pending=!0;let n=this.currentLoader.getTranslation(t).pipe(K(1),v(1));return this.loadingTranslations=n.pipe(x(s=>this.compiler.compileTranslations(s,t)),K(1),v(1)),this.loadingTranslations.subscribe({next:s=>{this.translations[t]=this.extend&&this.translations[t]?R(R({},s),this.translations[t]):s,this.updateLangs(),this.pending=!1},error:s=>{this.pending=!1}}),n}setTranslation(t,n,s=!1){let i=this.compiler.compileTranslations(n,t);(s||this.extend)&&this.translations[t]?this.translations[t]=_(this.translations[t],i):this.translations[t]=i,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){let n=t.filter(s=>!this.langs.includes(s));n.length>0&&(this.langs=[...this.langs,...n])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(t,n,s){let i;if(t&&(i=this.runInterpolation(H(t,n),s)),i===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(i=this.runInterpolation(H(this.translations[this.defaultLang],n),s)),i===void 0){let r={key:n,translateService:this};typeof s<"u"&&(r.interpolateParams=s),i=this.missingTranslationHandler.handle(r)}return i!==void 0?i:n}runInterpolation(t,n){if(J(t))return t.map(s=>this.runInterpolation(s,n));if(D(t)){let s={};for(let i in t){let r=this.runInterpolation(t[i],n);r!==void 0&&(s[i]=r)}return s}else return this.parser.interpolate(t,n)}getParsedResult(t,n,s){if(n instanceof Array){let i={},r=!1;for(let l of n)i[l]=this.getParsedResultForKey(t,l,s),r=r||d(i[l]);if(!r)return i;let V=n.map(l=>C(i[l]));return W(V).pipe(x(l=>{let y={};return l.forEach((w,lt)=>{y[n[lt]]=w}),y}))}return this.getParsedResultForKey(t,n,s)}get(t,n){if(!h(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(Z(s=>C(this.getParsedResult(s,t,n)))):C(this.getParsedResult(this.translations[this.currentLang],t,n))}getStreamOnTranslationChange(t,n){if(!h(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return P(N(()=>this.get(t,n)),this.onTranslationChange.pipe(O(s=>{let i=this.getParsedResult(s.translations,t,n);return C(i)})))}stream(t,n){if(!h(t)||!t.length)throw new Error('Parameter "key" required');return P(N(()=>this.get(t,n)),this.onLangChange.pipe(O(s=>{let i=this.getParsedResult(s.translations,t,n);return C(i)})))}instant(t,n){if(!h(t)||t.length===0)throw new Error('Parameter "key" is required and cannot be empty');let s=this.getParsedResult(this.translations[this.currentLang],t,n);return d(s)?Array.isArray(t)?t.reduce((i,r)=>(i[r]=r,i),{}):t:s}set(t,n,s=this.currentLang){ht(this.translations[s],t,X(n)?this.compiler.compile(n,s):this.compiler.compileTranslations(n,s)),this.updateLangs(),this.onTranslationChange.emit({lang:s,translations:this.translations[s]})}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.loadAndCompileTranslations(t)}resetLang(t){delete this._translationRequests[t],delete this.translations[t]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let t=this.getBrowserCultureLang();return t?t.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(n){return new(n||e)(o(T),o(f),o(p),o(g),o(b),o(B),o(G),o(q),o($))};static \u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var jt=(()=>{class e{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(t,n){this.translate=t,this._ref=n}updateValue(t,n,s){let i=r=>{this.value=r!==void 0?r:t,this.lastKey=t,this._ref.markForCheck()};if(s){let r=this.translate.getParsedResult(s,t,n);d(r)?r.subscribe(i):i(r)}this.translate.get(t,n).subscribe(i)}transform(t,...n){if(!t||!t.length)return t;if(M(t,this.lastKey)&&M(n,this.lastParams))return this.value;let s;if(h(n[0])&&n.length)if(X(n[0])&&n[0].length){let i=n[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{s=JSON.parse(i)}catch(r){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${n[0]}`)}}else D(n[0])&&(s=n[0]);return this.lastKey=t,this.lastParams=n,this.updateValue(t,s),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(i=>{this.lastKey&&i.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,s,i.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(i=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,s,i.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,s))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(n){return new(n||e)(U(c,16),U(Q,16))};static \u0275pipe=k({name:"translate",type:e,pure:!1,standalone:!0});static \u0275prov=u({token:e,factory:e.\u0275fac})}return e})();var z=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[t.loader||{provide:f,useClass:nt},t.compiler||{provide:p,useClass:rt},t.parser||{provide:g,useClass:it},t.missingTranslationHandler||{provide:b,useClass:st},T,{provide:G,useValue:t.isolate},{provide:B,useValue:t.useDefaultLang},{provide:q,useValue:t.extend},{provide:$,useValue:t.defaultLanguage},c]}}static forChild(t={}){return{ngModule:e,providers:[t.loader||{provide:f,useClass:nt},t.compiler||{provide:p,useClass:rt},t.parser||{provide:g,useClass:it},t.missingTranslationHandler||{provide:b,useClass:st},{provide:G,useValue:t.isolate},{provide:B,useValue:t.useDefaultLang},{provide:q,useValue:t.extend},{provide:$,useValue:t.defaultLanguage},c]}}static \u0275fac=function(n){return new(n||e)};static \u0275mod=j({type:e});static \u0275inj=S({})}return e})();var ot=(()=>{class e{http;prefix;suffix;constructor(t,n="/assets/i18n/",s=".json"){this.http=t,this.prefix=n,this.suffix=s}getTranslation(t){return this.http.get(`${this.prefix}${t}${this.suffix}`)}static \u0275fac=function(n){return new(n||e)(o(I),o(String),o(String))};static \u0275prov=u({token:e,factory:e.\u0275fac})}return e})();function ct(e){return new ot(e,"./assets/i18n/",".json")}var dt={loader:{provide:f,useFactory:ct,deps:[I]}},Pt=(()=>{class e{constructor(t){this.translate=t,t.setDefaultLang(et.defaultLang)}static{this.\u0275fac=function(n){return new(n||e)(o(c))}}static{this.\u0275mod=j({type:e})}static{this.\u0275inj=S({providers:[c,Y(tt())],imports:[z.forRoot(dt),z]})}}return e})();export{c as a,jt as b,Pt as c};
